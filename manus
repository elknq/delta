-- [[ SMART TARGET WOOD SHIELD FOR DELTA ]]
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

local _G_States = { WoodShield = false }
local targetPlayer = nil

-- [[ UI CREATION ]]
local sg = Instance.new("ScreenGui")
sg.Name = "SmartWallhan"
sg.ResetOnSpawn = false
local success, err = pcall(function() sg.Parent = game:GetService("CoreGui") end)
if not success then sg.Parent = LocalPlayer:WaitForChild("PlayerGui") end

local Main = Instance.new("Frame", sg)
Main.Size = UDim2.new(0, 220, 0, 180)
Main.Position = UDim2.new(0.5, -110, 0.2, 0)
Main.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Main.BorderSizePixel = 2
Main.BorderColor3 = Color3.new(1, 1, 1)
Main.Active = true
Main.Draggable = true

local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Title.Text = "SMART WOOD TARGET"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 16

local inp = Instance.new("TextBox", Main)
inp.Size = UDim2.new(0.9, 0, 0, 35)
inp.Position = UDim2.new(0.05, 0, 0.25, 0)
inp.PlaceholderText = "Type part of name (e.g. 'j')"
inp.Text = ""
inp.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
inp.TextColor3 = Color3.new(1, 1, 1)
inp.Font = Enum.Font.SourceSans
inp.TextSize = 14

local TargetDisplay = Instance.new("TextLabel", Main)
TargetDisplay.Size = UDim2.new(0.9, 0, 0, 25)
TargetDisplay.Position = UDim2.new(0.05, 0, 0.5, 0)
TargetDisplay.BackgroundTransparency = 1
TargetDisplay.Text = "Target: NONE (YOU)"
TargetDisplay.TextColor3 = Color3.fromRGB(200, 200, 200)
TargetDisplay.Font = Enum.Font.SourceSansItalic
TargetDisplay.TextSize = 13

-- Smart Search Logic
inp:GetPropertyChangedSignal("Text"):Connect(function()
    local text = inp.Text:lower()
    if text == "" then
        targetPlayer = nil
        TargetDisplay.Text = "Target: NONE (YOU)"
        TargetDisplay.TextColor3 = Color3.fromRGB(200, 200, 200)
    else
        local found = false
        for _, p in pairs(Players:GetPlayers()) do
            if p.Name:lower():find(text) or p.DisplayName:lower():find(text) then
                targetPlayer = p
                TargetDisplay.Text = "Target: " .. p.Name
                TargetDisplay.TextColor3 = Color3.fromRGB(0, 255, 0)
                found = true
                break
            end
        end
        if not found then
            targetPlayer = nil
            TargetDisplay.Text = "Target: NOT FOUND"
            TargetDisplay.TextColor3 = Color3.fromRGB(255, 0, 0)
        end
    end
end)

local Toggle = Instance.new("TextButton", Main)
Toggle.Size = UDim2.new(0.9, 0, 0, 40)
Toggle.Position = UDim2.new(0.05, 0, 0.7, 0)
Toggle.Font = Enum.Font.SourceSansBold
Toggle.TextSize = 14
local function Upd()
    Toggle.Text = "WOOD SHIELD: " .. (_G_States.WoodShield and "ON" or "OFF")
    Toggle.BackgroundColor3 = _G_States.WoodShield and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(60, 60, 60)
end
Toggle.MouseButton1Click:Connect(function() _G_States.WoodShield = not _G_States.WoodShield Upd() end)
Upd()

local TogBtn = Instance.new("TextButton", sg)
TogBtn.Size = UDim2.new(0, 45, 0, 45)
TogBtn.Position = UDim2.new(0, 10, 0, 50)
TogBtn.Text = "OPEN"
TogBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TogBtn.TextColor3 = Color3.new(1, 1, 1)
TogBtn.Draggable = true
TogBtn.MouseButton1Click:Connect(function()
    Main.Visible = not Main.Visible
    TogBtn.Text = Main.Visible and "CLOSE" or "OPEN"
end)

-- [[ CORE LOGIC ]]
task.spawn(function()
    local angle = 0
    while true do
        if _G_States.WoodShield and LocalPlayer.Character then
            angle = angle + 4
            local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                -- تحديد الهدف النهائي
                local finalTargetHRP = hrp
                if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    finalTargetHRP = targetPlayer.Character.HumanoidRootPart
                end

                for _, v in pairs(workspace:GetDescendants()) do
                    if v:IsA("BasePart") and not v.Anchored and not v:IsDescendantOf(LocalPlayer.Character) then
                        if v.Name:lower():find("wood") or v.Name:lower():find("door") or v.Material == Enum.Material.Wood then
                            for _, m in pairs(v:GetChildren()) do
                                if m:IsA("BodyMover") or m:IsA("AlignPosition") or m:IsA("Attachment") then m:Destroy() end
                            end
                            local a0, a1 = Instance.new("Attachment", v), Instance.new("Attachment", finalTargetHRP)
                            local al = Instance.new("AlignPosition", v)
                            al.Attachment0, al.Attachment1 = a0, a1
                            al.MaxForce, al.MaxVelocity, al.Responsiveness = math.huge, math.huge, 500
                            a1.Position = Vector3.new(math.cos(angle)*1.2, 0, math.sin(angle)*1.2)
                            v.Velocity = Vector3.new(1000, 1000, 1000)
                            v.CanCollide = false
                            game:GetService("Debris"):AddItem(a1, 0.1)
                        end
                    end
                end
            end
        end
        RunService.Heartbeat:Wait()
    end
end)
